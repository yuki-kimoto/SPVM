# Copyright (c) 2023 Yuki Kimoto
# MIT License

class Env : pointer {
  use Compiler;
  use Runtime;
  use Stack;
  
  # Fields
  has compiler : ro Compiler;
  
  # Class Methods
  native static method new : Env ($compiler : Compiler = undef);
  
  # Instance Methods
  native method set_command_info_program_name : void ($stack : Stack, $program_name : string);
  
  native method set_command_info_argv : void ($stack : Stack, $argv : string[]);
  
  native method set_command_info_base_time : void ($stack : Stack, $base_time : long);
  
  native method call_init_methods : void ($stack : Stack);
  
  native method destroy_class_vars : void ($stack : Stack);
  
  native method new_stack : Stack ();
  
  native method get_exception : string ();
  
  native method set_exception : void ($exception : string);
  
  native method DESTROY : void ();
}
